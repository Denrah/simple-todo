# TODO App

API для TODO-приложения. Приложение реализовано на NodeJS/Express, хранение данных в MySQL.

## Поддерживаемые методы

__Получить список задач__
`GET /todos`
Ответ:
```
[
    {
        id: 1
        text: "My first task"
    }
]
```

__Создать задачу__
`POST /todos`
Тело запроса в формате JSON:
```
{
    text: "My task"
}
```

__Health-check__
`GET /health`
Ответ:
```
{
    status: "ok"
}
```

## Сборка и запуск

__Сборка образов при помощи команды:__
`sh build.sh`
Собираются два образа через BuildX: для arm64 и amd64. При сборке в образ добавляется дата сборки и хэш коммита (параметры BUILD_DATE и BUILD_COMMIT).

__Запуск контейнеров через:__
`docker compose up`
По умолчанию запускается образ `simple-todo/arm64`. Можно указать другой образ (`simple-todo/amd64`), установив переменную среды `IMAGE_NAME`:
`export IMAGE_NAME="simple-todo/amd64"`

Параметры подключения к MySQL хранятся в файле `.env`. Для хранения состояния БД используется docker volume. При запуске, если таблица для сохранения todo не была создана, приложение её создаст автоматически.

## Health-check

В `docker-compose.yml` прописаны настройки healh-check'а контейнера с периодичностью 60 секунд.


Если я некорректно понял, какие-то пункты задание или реализовал не так, как планировалось, готов поправить и доделать.
